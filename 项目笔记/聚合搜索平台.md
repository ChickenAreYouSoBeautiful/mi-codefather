# èšåˆæœç´¢å¹³å°
æˆ‘ä»¬å¸Œæœ›åšä¸€ä¸ªé€šç”¨çš„æœç´¢åŠŸèƒ½ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡ä¸€ä¸ªé¡µé¢è¯·æ±‚å¤šç§ä¸åŒçš„æ•°æºç„¶åèšåˆè¿”å›ã€‚å¦‚ä¸‹å›¾æœç´¢â€œå°é»‘å­â€å¯ä»¥è·å–ç›¸å…³çš„ç½‘é¡µï¼Œå›¾ç‰‡ï¼Œè§†é¢‘ç­‰ç­‰ã€‚ç›¸æ¯”äºæ™®é€šçš„æœç´¢èƒ½æå‡ç”¨æˆ·æœç´ çš„æ•ˆç‡ä¸ä½“éªŒã€‚

![](https://cdn.nlark.com/yuque/0/2024/png/32636653/1725611896644-9224ba22-e96b-4a2e-8585-62a3671979cc.png)

## ä¸šåŠ¡é€»è¾‘
## æµç¨‹å›¾
![ç”»æ¿](https://cdn.nlark.com/yuque/0/2024/jpeg/32636653/1725612174898-7e79ac3c-7b75-4ea1-af6d-c9112d6a7c72.jpeg)

## æŠ€æœ¯æ ˆ
å‰ç«¯ï¼š

Ant Design vue

Axios

Lodash

åç«¯ï¼š

SpringBoot  
MyBaties

ElasticSerch

æ•°æ®åŒæ­¥

## é¡¹ç›®åˆå§‹åŒ–
å‰ç«¯:

[å¿«é€Ÿä¸Šæ‰‹ - Ant Design Vue (antdv.com)](https://www.antdv.com/docs/vue/getting-started-cn)

åç«¯ï¼š

æ‹‰å–é¡¹ç›®æ¨¡æ¿springboot-initï¼Œä¿®æ”¹é…ç½®åå¯åŠ¨å³å¯

## 2024-09-11
### å‰ç«¯å¼€å‘
æ•´åˆvue-router

åˆ©ç”¨ç»„ä»¶å¼€å‘æœç´¢é¡µé¢ï¼š[å¿«é€Ÿä¸Šæ‰‹ - Ant Design Vue (antdv.com)](https://www.antdv.com/docs/vue/getting-started-cn)

æ•´åˆAxiosï¼š [Axiosä¸­æ–‡æ–‡æ¡£ | Axiosä¸­æ–‡ç½‘ (axios-http.cn)](https://www.axios-http.cn/)

è®°å½•æŸ¥è¯¢çŠ¶æ€

ç›®æ ‡ï¼šç”¨urlè®°å½•æœç´¢çŠ¶æ€å½“åˆ·æ–°åå¯ä»¥æ¢å¤åˆ°ä¹‹å‰çš„æœç´¢çŠ¶æ€ï¼Œç±»ä¼¼bç«™æœç´¢ã€‚

åŒå‘ç»‘å®š =ã€‹ å•é¡¹ç»‘å®šï¼Œé urlæ¥æ”¹å˜çŠ¶æ€ï¼Œèˆå¼ƒçŠ¶æ€æ”¹å˜urlã€‚

#### todo
åˆ·æ–°åé¡µé¢åŠ¨æ€è·¯ç”±å‚æ•°è·å–ä¸åˆ°ã€‚

## 2024-09-13
### è·å–ä¸åŒæ•°æ®æº
å¸–å­ =ã€‹ ç³»ç»Ÿå†…éƒ¨

ç”¨æˆ· =ã€‹ ç³»ç»Ÿå†…éƒ¨

å›¾ç‰‡ =ã€‹ ç³»ç»Ÿå†…éƒ¨æ²¡æœ‰ï¼Œå¯ä»¥å°è¯•å»äº’è”ç½‘è·å–

### æŠ“å–æ•°æ®
+ é€šè¿‡å‰ç«¯è°ƒè¯•å™¨è·å–æ¥å£ä¿¡æ¯ï¼Œæ„å»ºå‚æ•°ç›´æ¥è°ƒç”¨è·å–æ•°æ®
+ è·å–æµè§ˆå™¨æ¸²æŸ“å‡ºæ¥çš„é¡µé¢ï¼Œæ ¹æ®é¡µé¢æ¥è§£ææ•°æ®
+ æœ‰ä¸€äº›åŠ¨æ€åŠ è½½çš„æ•°æ®å¦‚ï¼Œéœ€è¦ç‚¹å‡»æŸä¸€ä¸ªæŒ‰é’®ï¼Œæˆ–è¾“å…¥éªŒè¯ç æ‰èƒ½æ˜¾ç¤ºæ•°æ®çš„ï¼Œå¯ä»¥ä½¿ç”¨ä¸€äº›æ— å¤´æµè§ˆå™¨

**æ³¨ï¼šçˆ¬è™«ä¸å¯ä¹±ç”¨ï¼Œå°å¿ƒåŒ…åƒåŒ…ä½**

å›¾ç‰‡æˆ‘ä»¬ç³»ç»Ÿå†…éƒ¨æ²¡æœ‰æ‰€ä»¥éœ€è¦åˆ°ç½‘ç»œä¸Šè·å–ã€‚

æµç¨‹å›¾ï¼š

![ç”»æ¿](https://cdn.nlark.com/yuque/0/2024/jpeg/32636653/1726220892884-400f8924-b2c5-4338-925f-1ded27f05aa7.jpeg)

ä½¿ç”¨jsoupåº“é€šè¿‡è§£æé¡µé¢æ¥è·å–å›¾ç‰‡æ•°æ® 

[jsoup: Java HTML parser, built for HTML editing, cleaning, scraping, and XSS safety](https://jsoup.org/)

### å‰åç«¯è”è°ƒ
åç«¯èšåˆå¤šä¸ªæ¥å£ï¼Œé€šè¿‡ç±»å‹æ¥åŒºåˆ†æŸ¥è¯¢ã€‚

å‰ç«¯é¡µé¢åŠ è½½å’Œç‚¹å‡»æœç´¢æ—¶æŸ¥è¯¢æ‰€æœ‰é¡µé¢çš„ç¬¬ä¸€é¡µæ•°æ®ï¼Œç¿»é¡µæ—¶æ ¹æ®ç±»å‹è¿›è¡ŒæŸ¥è¯¢



### é—¨é¢æ¨¡å¼
 	ä¹‹åæˆ‘ä»¬çš„æ•°æ®æºå¯èƒ½ä¼šè¶Šæ¥è¶Šå¤šï¼Œå‰ç«¯å¦‚æœè¿˜æ˜¯æ¯å¤šä¸€ä¸ªæ•°æ®æºå°±å†å‰ç«¯å†å†™ä¸€ä¸ªæ–¹æ³•æŸ¥è¯¢ï¼Œæ—¢å½±å“æ€§èƒ½åˆä¸ä¾¿äºä»£ç çš„ç»´æŠ¤ã€‚æ‰€ä»¥éœ€è¦åˆ©ç”¨é—¨é¢æ¨¡å¼æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚

é—¨é¢æ¨¡å¼å°±æ˜¯æŠ½è±¡ä¸€ä¸ªæ¥æ”¶è¯·æ±‚çš„æ¨¡å—å¹¶æ ¹æ®æ¥æ”¶è¯·æ±‚çš„å‚æ•°è¿›è¡Œå“åº”çš„é€»è¾‘å¤„ç†ï¼Œä½¿æˆ‘ä»¬ä¸éœ€è¦å…³æ³¨å…·ä½“çš„é€»è¾‘ã€‚ä¾‹å¦‚é…’åº—çš„å‰å°ï¼Œæˆ‘ä»¬éœ€è¦æˆ¿é—´æ—¶ä¸ä¼šè¯´è‡ªå·±ä¸€ä¸ªä¸€ä¸ªå»æ‰¾ï¼Œè€Œæ˜¯è¯·æ±‚é…’åº—çš„å‰å°å¸®æˆ‘ä»¬å¯»æ‰¾æˆ¿é—´ã€‚

### é€‚é…å™¨æ¨¡å¼
é€‚é…å™¨æ¨¡å¼çš„ä½œç”¨æ˜¯é€šè¿‡é€‚é…è°ƒç”¨å‚æ•°å¹¶ä¸é€‚é…çš„æ–¹æ³•ã€‚ä¾‹å¦‚æ’åº§ï¼Œå……ç”µå™¨ï¼Œæ•°æ®çº¿çš„å…³ç³»ï¼Œæ’åº§å’Œæ•°æ®çº¿å› ä¸ºä¸é€‚é…å¹¶ä¸èƒ½è¿æ¥ï¼Œä½†é€šè¿‡å……ç”µå™¨çš„é€‚é…å°±å¯ä»¥è®©ä»–ä»¬è¿æ¥èµ·æ¥ã€‚

    ç›®å‰æœç´¢æ˜¯é€šè¿‡switchæ ¹æ®ç±»å‹æ¥æœç´¢ä¸åŒçš„æ•°æ®æºï¼Œä½†èšåˆå¤šä¸ªæ¥å£åä¼šå¯¼è‡´ä»£ç è‡ƒè‚¿ï¼Œä¸åˆ©äºç»´æŠ¤ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åˆ©ç”¨é€‚é…å™¨æ¨¡å¼æ¥æŠ½è±¡æŸ¥è¯¢çš„ä»£ç ã€‚

æˆ‘ä»¬éœ€è¦å…ˆå®šä¹‰ä¸€å¥—æ¥å£çš„è§„èŒƒï¼Œè¦æ¥å…¥ç³»ç»Ÿçš„æ•°æ®æºéœ€è¦æ”¯æŒæœç´¢å’Œåˆ†é¡µã€‚

## 2024-09-24
### Elastic Stack ï¼ˆä¸€å¥—æŠ€æœ¯æ ˆï¼‰
åŒ…å«æ•°æ®çš„æ•´åˆ =ã€‹ æå– =ã€‹ å­˜å‚¨ =ã€‹ ä½¿ç”¨

+ beatsï¼š ä»å„ç§ä¸åŒç±»å‹çš„æ–‡ä»¶/åº”ç”¨ä¸­é‡‡å–æ•°æ®
+ logstash:  ä»é‡‡é›†å™¨æˆ–æ•°æ®æºæŠ½å–æ•°æ®/è½¬æ¢æ•°æ®è¾“é€ æ¯”å¦‚å‘escè¾“é€
+ elasticsearch: å­˜å‚¨/æŸ¥è¯¢æ•°æ®
+ kibana:  å¯è§†åŒ–æŸ¥è¯¢esæ•°æ®

### ElasticSearchå…¥é—¨
#### æ¦‚å¿µ
elasticsearchæ˜¯ä¸€ä¸ªå­˜å‚¨æœåŠ¡ï¼Œç‰¹ç‚¹æ˜¯æœç´¢åŠŸèƒ½ååˆ†å¼ºå¤§ã€‚ç›¸æ¯”äºMysqlå¯ä»¥å¸®æˆ‘ä»¬è¿›è¡Œåˆ†è¯æœç´¢éå¸¸çµæ´»ã€‚

å¯ä»¥å’Œmysqlå¯¹æ¯”ç€ç†è§£

| mysql | es |
| --- | --- |
| è¡¨ | ç´¢å¼• |
|  | |


**å€’æ’ç´¢å¼•**

æ­£å‘ç´¢å¼•ï¼š å¯ä»¥ç†è§£ä¸ºä¹¦çš„ç›®å½•ï¼Œæ ¹æ®ç›®å½•å»æ‰¾æ–‡ç« å†…å®¹

å€’æ’ç´¢å¼•ï¼š ç†è§£ä¸ºæ ¹æ®å†…å®¹å»æ‰¾æ–‡ç« ã€‚

å¦‚ä½•å»æ‰¾ï¼Ÿ

æ–‡ç« A ï¼š ä½ å¥½ï¼Œä¸–ç•Œ

æ–‡ç« Bï¼š ä½ å¥½ï¼Œcode

åˆ‡è¯

ä½ å¥½ ä¸–ç•Œ

ä½ å¥½ code

æ„å»ºå€’æ’ç´¢å¼•è¡¨

| ä½ å¥½ | æ–‡ç« A,æ–‡ç« B |
| --- | --- |
| ä¸–ç•Œ | æ–‡ç« A |
| code | æ–‡ç« B |


ç”¨æˆ·æœç´¢æ—¶å…ˆå°†æœç´¢å†…å®¹è¿›è¡Œåˆ‡è¯ï¼Œå†åˆ°å€’æ’ç´¢å¼•è¡¨é‡Œå»æ‰¾

### Esçš„å‡ ç§è°ƒç”¨æ–¹å¼
#### restfulè¯·æ±‚ ï¼ˆhttpè¯·æ±‚ï¼‰
GET http://localhost:9200/

ç«¯å£å ç”¨

+ 9200  å¼€æ”¾ç»™å¤–éƒ¨è°ƒç”¨çš„æ¥å£
+ 9300   é›†ç¾¤é—´å†…éƒ¨é€šä¿¡çš„æ¥å£ï¼ˆä¸å¯¹å¤–å¼€æ”¾ï¼‰

#### kibana devtools
å¯ä»¥è‡ªç”±æ“ä½œESï¼Œæœ¬è´¨é¡µæ•°resfulè¯·æ±‚ã€‚

ä¸å»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨

#### å®¢æˆ·ç«¯è°ƒç”¨
javaå®¢æˆ·ç«¯ç­‰ï¼Œå„ç§è¯­è¨€çš„å®¢æˆ·ç«¯

### åŸºç¡€ç”¨æ³•
å¯ä»¥è·Ÿç€æ–‡æ¡£è¿‡ [Quick start | Elasticsearch Guide [7.17] | Elastic](https://www.elastic.co/guide/en/elasticsearch/reference/7.17/getting-started.html)

```json
//åˆ›å»ºç´¢å¼•
PUT user/_doc
{
  "name": "æ— æ•Œ",
  "age": 18
}
//æ’å…¥æ•°æ®
POST user/_doc
{
  "name": "æå››",
  "age": 18
}
//æŸ¥è¯¢
GET user/_search
//ä¿®æ”¹
POST user/_doc/{id}
{
  "name": "æå››",
  "age": 19
}
//åˆ é™¤
DELETE user

```

### Esè¯­æ³•
**DSL**

jsonæ ¼å¼ï¼Œé€‚é…resfulï¼Œç®€å•æ˜“æ‡‚

**EQL**

ä¸“é—¨æŸ¥è¯¢ECSæ–‡æ¡£ï¼ˆæ ‡å‡†æŒ‡æ ‡æ–‡æ¡£ï¼‰çš„æ•°æ®ï¼Œè¯­æ³•æ›´åŠ è§„èŒƒï¼Œé€‚ç”¨äºç‰¹å®šåœºæ™¯ 

**SQL**

å­¦ä¹ æˆæœ¬ä½ï¼Œsqléœ€è¦è§£ææ•ˆç‡è¾ƒä½

**<font style="color:rgb(33, 37, 41);">Painless scripting language</font>**

<font style="color:rgb(33, 37, 41);">ç¼–ç¨‹å¼å–å€¼ï¼Œæ›´åŠ çµæ´»ï¼Œå­¦ä¹ æˆæœ¬é«˜</font>

<font style="color:rgb(33, 37, 41);"></font>

### <font style="color:rgb(33, 37, 41);">Mapping</font>
<font style="color:rgb(33, 37, 41);">ç±»ä¼¼äºmysqlä¸­çš„è¡¨ç»“æ„</font>

### åˆ†è¯å™¨
Esè‡ªå¸¦çš„åˆ†è¯å™¨ä¸æ˜¯å¾ˆé€‚é…ä¸­æ–‡ï¼Œä½†Esçš„åˆ†è¯å™¨å¯ä»¥è‡ªå®šä¹‰å¹¶ä¸”æ”¯æŒæ’ä»¶ã€‚

ä¸‹è½½ikåˆ†è¯å™¨

[infinilabs/analysis-ik: ğŸšŒ The IK Analysis plugin integrates Lucene IK analyzer into Elasticsearch and OpenSearch, support customized dictionary. (github.com)](https://github.com/infinilabs/analysis-ik)

å°è¯•ä¹‹åå‘ç°æœ‰æ—¶åˆ†è¯çš„æ•ˆæœä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœï¼Œå¯ä»¥é€šè¿‡é…ç½®è¯å…¸æ¥è¾…åŠ©åˆ†è¯ã€‚åˆ†è¯æ—¶ä¼šå»çœ‹çœ‹è¯å…¸é‡Œæ˜¯å¦æœ‰è¿™ä¸ªè¯å¦‚æœæœ‰å°±å¯ä»¥è¿›è¡Œåˆ’åˆ†

### æ‰“åˆ†æœºåˆ¶
EsæŸ¥è¯¢å‡ºçš„æ•°æ®çš„é¡ºåºæ˜¯æŒ‰ç…§åˆ†å€¼çš„é«˜ä½æ¥è¿›è¡Œæ’åºçš„ï¼Œå¾—åˆ†è¶Šé«˜è¶Šé å‰ã€‚

å½“å†…å®¹ä¸æœç´¢è¯è¶Šç›¸ä¼¼åˆ†å€¼è¶Šé«˜ã€‚

ä¾‹å¦‚ï¼š 

æˆ‘æ˜¯ä¸€ä¸ªå°é»‘å­

æˆ‘æ˜¯ä¸€ä¸ªé»‘å­

å½“æˆ‘ä»¬æœç´¢é»‘å­æ—¶ç¬¬äºŒä¸ªçš„åˆ†å€¼ä¼šæ¯”ç¬¬ä¸€ä¸ªçš„é«˜ï¼Œå› ä¸ºç¬¬äºŒä¸ªæ›´çŸ­

### Javaå®¢æˆ·ç«¯
+ å®˜æ–¹æä¾›çš„Javaå®¢æˆ·ç«¯APIè°ƒç”¨  

é…ç½®æ–¹ä¾¿ï¼Œæ›´æ–°è¿­ä»£å¿«

+ SpringBoot Data ElasticSearchè°ƒç”¨

é…ç½®æ›´æ–¹ä¾¿ï¼Œå¯æ ¹æ®æ–¹æ³•åç”Ÿæˆå®ç°ï¼Œä¹Ÿæ”¯æŒå¤æ‚çš„èšåˆæœç´¢ã€‚

å¯¹æ¯”ç‰ˆæœ¬7.17å¯¹åº”SpringBoot Data ElasticSearch 4.4.X

é…ç½®yml

```json
spring:
  elasticsearch:
    uris: http://localhost:9200
```

#### ç»§æ‰¿ElasticsearchRepositoryè°ƒç”¨
æä¾›äº†ç®€å•çš„crudæ–¹æ³•ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æŒ‰ç…§ä»–çš„æ–¹æ³•åè§„èŒƒæ¥å†™æ¥å£ï¼Œæ¡†æ¶ä¼šå¸®æˆ‘ä»¬è‡ªåŠ¨å®ç°ã€‚ååˆ†ä¾¿æ·ï¼Œé€‚ç”¨äºç®€å•æŸ¥è¯¢åœºæ™¯ã€‚

```java
public interface PostEsDao extends ElasticsearchRepository<PostEsDTO, Long> {

    /**
     * æ ¹æ®ç”¨æˆ·åæŸ¥è¯¢
     * @param userId
     * @return
     */
    List<PostEsDTO> findByUserId(Long userId);

    /**
     * æ ¹æ®idå’Œç”¨æˆ·åæŸ¥è¯¢
     * @param id 
     * @param userId
     * @return
     */
    List<PostEsDTO> findByIdAndUserId(Long id,Long userId);
}
```

#### é€šè¿‡ElasticsearchRestTemplateè°ƒç”¨
ç±»ä¼¼äºMybatisçš„queryWapperå¯ä»¥buildå„ç§æ¡ä»¶è¿›è¡ŒæŸ¥è¯¢ï¼Œååˆ†çµæ´»ï¼Œé€‚ç”¨äºå¤æ‚æŸ¥è¯¢çš„åœºæ™¯

```java
  boolQueryBuilder.filter(QueryBuilders.termQuery("isDelete", 0));
        if (id != null) {
            boolQueryBuilder.filter(QueryBuilders.termQuery("id", id));
        }
        if (notId != null) {
            boolQueryBuilder.mustNot(QueryBuilders.termQuery("id", notId));
        }
        if (userId != null) {
            boolQueryBuilder.filter(QueryBuilders.termQuery("userId", userId));
        }
        // å¿…é¡»åŒ…å«æ‰€æœ‰æ ‡ç­¾
        if (CollectionUtils.isNotEmpty(tagList)) {
            for (String tag : tagList) {
                boolQueryBuilder.filter(QueryBuilders.termQuery("tags", tag));
            }
        }
        // åŒ…å«ä»»ä½•ä¸€ä¸ªæ ‡ç­¾å³å¯
        if (CollectionUtils.isNotEmpty(orTagList)) {
            BoolQueryBuilder orTagBoolQueryBuilder = QueryBuilders.boolQuery();
            for (String tag : orTagList) {
                orTagBoolQueryBuilder.should(QueryBuilders.termQuery("tags", tag));
            }
            orTagBoolQueryBuilder.minimumShouldMatch(1);
            boolQueryBuilder.filter(orTagBoolQueryBuilder);
        }
        // æŒ‰å…³é”®è¯æ£€ç´¢
        if (StringUtils.isNotBlank(searchText)) {
            boolQueryBuilder.should(QueryBuilders.matchQuery("title", searchText));
            boolQueryBuilder.should(QueryBuilders.matchQuery("description", searchText));
            boolQueryBuilder.should(QueryBuilders.matchQuery("content", searchText));
            boolQueryBuilder.minimumShouldMatch(1);
        }
        // æŒ‰æ ‡é¢˜æ£€ç´¢
        if (StringUtils.isNotBlank(title)) {
            boolQueryBuilder.should(QueryBuilders.matchQuery("title", title));
            boolQueryBuilder.minimumShouldMatch(1);
        }
        // æŒ‰å†…å®¹æ£€ç´¢
        if (StringUtils.isNotBlank(content)) {
            boolQueryBuilder.should(QueryBuilders.matchQuery("content", content));
            boolQueryBuilder.minimumShouldMatch(1);
        }
        // æ’åº
        SortBuilder<?> sortBuilder = SortBuilders.scoreSort();
        if (StringUtils.isNotBlank(sortField)) {
            sortBuilder = SortBuilders.fieldSort(sortField);
            sortBuilder.order(CommonConstant.SORT_ORDER_ASC.equals(sortOrder) ? SortOrder.ASC : SortOrder.DESC);
        }
        // åˆ†é¡µ
        PageRequest pageRequest = PageRequest.of((int) current, (int) pageSize);
        // æ„é€ æŸ¥è¯¢
        NativeSearchQuery searchQuery = new NativeSearchQueryBuilder().withQuery(boolQueryBuilder)
                .withPageable(pageRequest).withSorts(sortBuilder).build();
        SearchHits<PostEsDTO> searchHits = elasticsearchRestTemplate.search(searchQuery, PostEsDTO.class);
        
```

### æ•°æ®åŒæ­¥
æˆ‘ä»¬éœ€è¦é€šè¿‡esæ¥è¿›è¡Œæ£€ç´¢ï¼Œè‚¯å®šéœ€è¦å…ˆæœ‰æ•°æ®ï¼Œç°åœ¨æˆ‘ä»¬çš„æ•°æ®æ˜¯å­˜åœ¨æ•°æ®åº“ä¸­çš„ï¼Œæ‰€ä»¥è¦åŒæ­¥åˆ°esä¸­ã€‚

æ•°æ®åŒæ­¥æ—¶æˆ‘ä»¬è¦é€‰æ‹©ä»¥å“ªä¸€ä¸ªæ•°æ®æºä¸ºå‡†ï¼Œå¦‚æœå½“æ•°æ®ä¸ä¸€è‡´æ—¶æˆ‘ä»¬è¦çŸ¥é“ä»¥å“ªä¸ªä¸ºå‡†ï¼Œè¿™é‡Œæˆ‘ä»¬æ˜¯ä»mysqlå­˜åˆ°esï¼Œæ‰€ä»¥ä»¥mysqlä¸ºå‡†ã€‚

æ•°æ®åŒæ­¥åˆ†ä¸º

**å…¨é‡åŒæ­¥**

ç¼–å†™ä¸€ä¸ªä¸€æ¬¡æ€§ä»»åŠ¡å°†mysqlæ•°æ®æŸ¥å‡ºï¼Œå¢åŠ åˆ°esä¸­

**å¢é‡åŒæ­¥**

å½“æ•°æ®æ˜¯åŠ¨æ€çš„æ—¶å€™ï¼Œæ¯”å¦‚å¢åˆ æ”¹æ—¶ä¹Ÿéœ€è¦è¿›è¡ŒåŒæ­¥ï¼Œå¦‚æœå°†å…¨éƒ¨æ•°æ®æŸ¥å‡ºåå†åŒæ­¥ä¼šå¾ˆæ¶ˆè€—æ€§èƒ½ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åŒæ­¥æœ€è¿‘æ–¹å¼è¿‡æ”¹å˜çš„æ•°æ®ã€‚

+ å®šæ—¶ä»»åŠ¡

æ¯”å¦‚æ¯åˆ†é’ŸåŒæ­¥ä¸€æ¬¡ï¼Œæ¯æ¬¡åŒæ­¥æŸ¥è¯¢å‰äº”åˆ†é’Ÿä¿®æ”¹è¿‡çš„æ•°æ®ã€‚ä¸ºäº†é˜²æ­¢åŒæ­¥å¤±è´¥æ‰€ä»¥è®¾ç½®ä¸º5åˆ†é’Ÿï¼ŒåŒæ—¶å¯ä»¥å¢åŠ ç›‘æ§å‘Šè­¦å’Œè¡¥å¿æœºåˆ¶

+ æ•°æ®åŒå†™

å½“æˆ‘ä»¬å¢åˆ mysqlçš„æ•°æ®æ—¶ï¼ŒåŒæ—¶å‘esä¸­åŒæ­¥æœ¬æ¬¡æ“ä½œï¼Œéœ€è¦ç”¨åˆ°äº‹åŠ¡

+ logstashæ•°æ®ç®¡é“

logstashä»–å¯ä»¥ä»æ•°æ®æºæˆ–åº”ç”¨ä¸­è·å–æ•°æ®å¤„ç†åå†è¾“å‡ºåˆ°æ•°æ®åº“å’Œåº”ç”¨ä¸­ã€‚

[logstashæ–‡æ¡£](https://www.elastic.co/guide/en/logstash/7.17/first-event.html)

![](https://cdn.nlark.com/yuque/0/2024/png/32636653/1727249941486-8bebeea7-874a-45a2-afb5-c731860d55d6.png)

```bash
.\bin\logstash.bat -e "input { stdin { } } output { stdout {} }"
```

å¯ä»¥é€šè¿‡é…ç½®æ¥å®ç°

```plain

input {
  jdbc {
    jdbc_driver_library => ""D:\apache-maven-3.8.1\mav_resp\mysql\mysql-connector-java\8.0.29\mysql-connector-java-8.0.29.jar""
    jdbc_driver_class => "com.mysql.cj.jdbc.Driver"
    jdbc_connection_string => "jdbc:mysql://localhost:3306/common_search"
    jdbc_user => "root"
	jdbc_password => "root"
    parameters => { "favorite_artist" => "Beethoven" }
    schedule => "*/5 * * * * *"
    statement => "SELECT * from post where 1 = 1"
  }
}

output {
  stdout(codec => rubydebug)
}

```

+ canalè®¢é˜…åŒæ­¥

canalæ˜¯alibabaå¼€æºçš„ä¸€æ¬¾è®¢é˜…æ•°æ®åº“binlogçš„ç»„ä»¶ã€‚å…¶åŸç†æ˜¯mysqlå¼€å¯binlogåæ“ä½œæ•°æ®åº“ä¼šå‘binlogä¸­å†™å…¥æ“ä½œå†…å®¹ï¼Œç„¶åæˆ‘ä»¬ç›‘å¬è¿™ä¸ªæ—¥å¿—æ–‡ä»¶çš„å˜åŒ–å°±å¯ä»¥æ‹¿åˆ°æ”¹å˜çš„å†…å®¹ã€‚canalæ˜¯ä¼ªè£…æˆäº†mysqlæœåŠ¡çš„ä»èŠ‚ç‚¹ï¼Œåˆ©ç”¨ä¸»èŠ‚ç‚¹åŒæ­¥ä»èŠ‚ç‚¹çš„binlogæ–‡ä»¶ï¼Œè§£æå‡ºæˆ‘ä»¬å¯ä»¥çœ‹æ‡‚çš„æ•°æ®ã€‚

å¿«é€Ÿå¼€å§‹ï¼š[https://github.com/alibaba/canal/wiki/QuickStart](https://github.com/alibaba/canal/wiki/QuickStart)++

ä¼˜ç‚¹ï¼š

å®æ—¶æ›´æ–°ï¼Œæ–¹ä¾¿

ç¼ºç‚¹ï¼š

éœ€è¦ç»´æŠ¤é¢å¤–çš„ç»„ä»¶ï¼Œé¢å¤–çš„å­¦ä¹ æˆæœ¬



### å‹åŠ›æµ‹è¯•
jmeterï¼š[https://jmeter.apache.org/](https://jmeter.apache.org/)



### é¡¹ç›®æ€»ç»“
MI-Searchæ˜¯ä¸€ä¸ªé€šç”¨çš„æœç´¢ç»„ä»¶ï¼Œæ˜¯ä¸ºäº†ä¼˜åŒ–ç”¨æˆ·ä½“éªŒå¯ä»¥è®©ç”¨æˆ·åœ¨ä¸€ä¸ªé¡µé¢æŸ¥è¯¢åˆ°å¤šç§ç±»å‹çš„æ•°æ®ï¼Œå¹¶ä¸”å¯ä»¥è®©å¼€å‘äººå‘˜ä¸ç”¨é‡å¤å¼€å‘æœç´¢åŠŸèƒ½ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚åç«¯å¯ä»¥è½»æ¾çš„æ¥å…¥å¤šä¸ªä¸åŒçš„æ•°æ®æºï¼Œå¤ç”¨æœç´¢åŠŸèƒ½ã€‚å¹¶ä¸”é€šè¿‡elasticSearchå®ç°äº†åˆ†è¯æœç´¢ï¼Œé«˜äº®æ˜¾ç¤ºçš„ç¤ºä¾‹ï¼Œè¿˜é…ç½®äº†æ¡ˆä¾‹å°†mysqlå¸–å­è¡¨æ•°æ®åŒæ­¥åˆ°Esä¸Šè¿›è¡Œæœç´¢ã€‚

æ”¶è·ï¼š

1. ç†è§£é—¨é¢æ¨¡å¼ï¼Œé€‚é…å™¨æ¨¡å¼ï¼Œæ³¨å†Œæ¨¡å¼ 
2. å­¦ä¹ ElasticSearchæ¦‚å¿µ,åŸºæœ¬è¯­æ³•å’ŒSpringBoot Data ElastticSearch Javaå®¢æˆ·ç«¯ï¼Œç†Ÿæ‚‰ç”¨æ³•ï¼Œæœ‰é—å¿˜åº”è¯¥ä¹Ÿå¯ä»¥å‡­å€Ÿå°è±¡çœ‹æ–‡æ¡£ä½¿ç”¨ã€‚
3. å…¨é‡åŒæ­¥ï¼Œå¢é‡åŒæ­¥çš„æ•°æ®åŒæ­¥çš„å››ç§æ–¹å¼ ï¼ˆå®šæ—¶ï¼ŒåŒå†™ï¼Œlogstashç®¡é“,canalè®¢é˜…binlogï¼‰
4. å‹åŠ›æµ‹è¯•æ¦‚å¿µï¼Œå·¥å…· jmeterï¼ˆä¸»è¦å°±æ˜¯æŸ¥è¯¢å¤šçº¿ç¨‹æƒ…å†µä¸‹æ¥å£çš„ç¨³å®šï¼Œå“åº”æ—¶é•¿ï¼Œqpsï¼‰



